{% extends 'index.html' %}

{% block body %}
<div class="container mx-auto mt-5">
  <div class="relative h-96 select-none">
    <img src="{{ dorm.image_url }}" class="object-cover w-full h-full" alt="{{ dorm.name }}">
    <h1 class="absolute top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-4xl font-bold text-white">{{ dorm.name }}</h1>
    
    <!-- Add a button to create a new post for this dorm -->
    <a href="{{ url_for('create_post', dorm_name=dorm.name) }}" class="absolute bottom-4 right-4 btn btn-primary">Write an Anonymous Review</a>
    
    <!-- Position the description and average rating right under the dorm title -->
    <div class="absolute bottom-20 left-1/2 transform -translate-x-1/2 text-white text-center">
      <p class="text-white">{{ dorm.description }}</p>
      <div class="bg-gray-900 rounded-lg p-4 mt-5 flex items-center justify-center">
        <p class="text-xl font-semibold text-white">Overall Rating:</p>
        <span class="text-4xl font-bold text-white ml-2">{{ dorm_avg_reviews[dorm.name] }}</span>
      </div>
    </div>
  </div>
</div>

<div class="container mx-auto mt-5">
  <ul>
    {% if posts %}
    {% for post in posts %}
    <div class="bg-slate-900 rounded-lg shadow-md p-4 mb-4 relative">
      <!-- Move the datetime to the top right -->
      <p class="text-white absolute top-5 right-5">{{ post.date_posted.strftime('%Y-%m-%d') }}</p>
      <div class="flex items-center"> <!-- Removed justify-between to center rating -->
        <div class = "flex items-center">
          <p class="text-2xl font-semibold text-white mx-3">Rating:</p>
          <span class="text-5xl font-bold text-white mb-2 text-center">{{ post.review }}</span>
        </div>
        <div class="border-r border-white h-20 my-3 mx-5"></div> <!-- Adjusted margin -->
        <div class="w-4/5">
          <p class="text-white break-words">{{ post.content }}</p>
        </div>
      </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="flex items-center justify-center">
      <span class="text-2xl font-bold text-gray mt-10">No reviews yet! Please leave a review.</span> 
    </div>
    {% endif %}
  </ul>
</div>
{% endblock body %}
